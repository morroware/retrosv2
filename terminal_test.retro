# Terminal Scripting Test
# Tests the new Terminal built-in functions and events

print "=== Terminal Scripting Test ==="
print

# Test 1: Check if terminal is open
print "[Test 1] Checking terminal status..."
set $isOpen = call isTerminalOpen
print "  Terminal is open: $isOpen"

# Test 2: Open terminal if not open
print "[Test 2] Ensuring terminal is open..."
set $result = call terminalOpen
print "  Terminal open result: $result"

# Wait for terminal to initialize
wait 300

# Test 3: Get terminal state
print "[Test 3] Getting terminal state..."
set $state = call terminalGetState
print "  Terminal state: $state"

# Test 4: Print to terminal
print "[Test 4] Printing to terminal..."
set $printResult = call terminalPrint "Hello from RetroScript!" "#00ff00"
print "  Print result: $printResult"

# Test 5: Get current path
print "[Test 5] Getting current path..."
set $path = call terminalGetPath
print "  Current path: $path"

# Test 6: Execute a terminal command
print "[Test 6] Executing 'ver' command..."
set $cmdResult = call terminalExecute "ver"
print "  Command result: $cmdResult"

# Test 7: Get environment variable
print "[Test 7] Getting environment variable..."
set $osVar = call terminalGetEnvVar "OS"
print "  OS variable: $osVar"

# Test 8: Set environment variable
print "[Test 8] Setting environment variable..."
set $setResult = call terminalSetEnvVar "TESTVAR" "HelloWorld"
set $testVar = call terminalGetEnvVar "TESTVAR"
print "  Set result: $setResult, Value: $testVar"

# Test 9: Create alias
print "[Test 9] Creating alias..."
set $aliasResult = call terminalAlias "ls" "dir"
set $aliases = call terminalGetAliases
print "  Alias result: $aliasResult"
print "  Aliases: $aliases"

# Test 10: Get command history
print "[Test 10] Getting command history..."
set $history = call terminalGetHistory
set $histCount = call count $history
print "  History count: $histCount"

# Test 11: Directory listing
print "[Test 11] Getting directory listing..."
set $dirList = call terminalDir
set $dirCount = call count $dirList
print "  Items in current directory: $dirCount"

# Test 12: File existence check
print "[Test 12] Checking file existence..."
set $exists = call terminalFileExists "C:/Users/User/test.txt"
print "  C:/Users/User/test.txt exists: $exists"

# Test 13: Write and read file
print "[Test 13] Testing file operations..."
set $writeResult = call terminalWriteFile "test_terminal.txt" "Hello from terminal test!"
print "  Write result: $writeResult"
set $content = call terminalReadFile "test_terminal.txt"
print "  Read content: $content"

# Cleanup
delete "C:/Users/User/test_terminal.txt"

# Test 14: Show fortune
print "[Test 14] Getting fortune..."
set $fortune = call terminalFortune
print "  Fortune displayed in terminal"

# Test 15: Show cowsay
print "[Test 15] Cowsay test..."
set $cowResult = call terminalCowsay "RetroScript is awesome!"
print "  Cowsay displayed in terminal"

print
print "=== All Terminal Tests Complete ==="
print "Check the terminal window for output!"

# Notify user
notify "Terminal scripting test complete!"
